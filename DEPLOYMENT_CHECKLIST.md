# Vercel Deployment Checklist

## âœ… Pre-Deployment Setup

### 1. Environment Variables (Set in Vercel Dashboard)
Go to your Vercel project â†’ Settings â†’ Environment Variables and add:

- **GEMINI_API_KEY**: Your Google Gemini API key
- **MONGODB_URI**: Your MongoDB connection string
- **NODE_ENV**: `production`

### 2. Files to Commit
Make sure these are in your GitHub repository:
- âœ… `vercel.json`
- âœ… `package.json` (root)
- âœ… `frontend/package.json`
- âœ… `frontend/package-lock.json`
- âœ… `api/` folder with all serverless functions
- âœ… `backend/models/` and `backend/utils/` (used by API functions)
- âœ… `.vercelignore`
- âœ… `frontend/src/utils/api.js` (API URL configuration)

### 3. Files NOT to Commit
These should be in `.gitignore`:
- âŒ `node_modules/`
- âŒ `.env`
- âŒ `backend/uploads/`
- âŒ `*.log`

## ğŸš€ Deployment Steps

### Step 1: Push to GitHub
```bash
git add .
git commit -m "Prepare for Vercel deployment"
git push origin main
```

### Step 2: Deploy on Vercel

**Option A: Via Vercel Dashboard**
1. Go to https://vercel.com
2. Click "New Project"
3. Import your GitHub repository
4. Vercel will auto-detect the configuration
5. Add environment variables
6. Click "Deploy"

**Option B: Via Vercel CLI**
```bash
npm i -g vercel
vercel login
vercel
```

### Step 3: Verify Deployment

After deployment, check:
1. âœ… Frontend loads at your Vercel URL
2. âœ… API routes work: `https://your-app.vercel.app/api/upload`
3. âœ… MongoDB connection is established
4. âœ… File uploads work
5. âœ… Gemini API integration works

## ğŸ“ Project Structure Explanation

```
Smart Study/
â”œâ”€â”€ frontend/              # React frontend (built to static site)
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ dist/             # Built output (generated by Vercel)
â”‚
â”œâ”€â”€ backend/              # Shared utilities (not deployed as server)
â”‚   â”œâ”€â”€ models/           # MongoDB models (used by API functions)
â”‚   â”œâ”€â”€ utils/            # Utilities (used by API functions)
â”‚   â””â”€â”€ routes/           # Not used (API functions replace this)
â”‚
â”œâ”€â”€ api/                  # Vercel serverless functions
â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â”œâ”€â”€ index.js      # Handles /api/upload
â”‚   â”‚   â””â”€â”€ text.js       # Handles /api/upload/text
â”‚   â””â”€â”€ generate/
â”‚       â”œâ”€â”€ summary/[documentId].js
â”‚       â”œâ”€â”€ flashcards/[documentId].js
â”‚       â””â”€â”€ quiz/[documentId].js
â”‚
â”œâ”€â”€ vercel.json           # Vercel configuration
â””â”€â”€ package.json          # Root dependencies (for API functions)
```

## ğŸ”§ How It Works

1. **Frontend Build**: Vercel builds the React app from `frontend/` directory
2. **API Functions**: Vercel automatically detects `api/` folder and deploys as serverless functions
3. **Shared Code**: API functions import from `backend/` directory (models, utils)
4. **Routing**: 
   - `/api/*` â†’ Serverless functions
   - `/*` â†’ React frontend (SPA)

## ğŸ› Troubleshooting

### Build Fails
- Check that `frontend/package-lock.json` exists
- Verify `vite` is in `frontend/package.json` devDependencies
- Check Vercel build logs for specific errors

### API Routes Not Working
- Verify environment variables are set in Vercel
- Check API function logs in Vercel dashboard
- Ensure MongoDB URI is correct
- Verify Gemini API key is valid

### Frontend Can't Connect to API
- Check that `frontend/src/utils/api.js` is using relative paths in production
- Verify API routes are accessible at `/api/*`
- Check browser console for CORS errors

## ğŸ“ Important Notes

1. **File Uploads**: Use memory storage (already configured for serverless)
2. **MongoDB**: Ensure your MongoDB Atlas cluster allows connections from Vercel's IP ranges (0.0.0.0/0 for development)
3. **API Limits**: Vercel free tier has execution time limits (10 seconds)
4. **Environment Variables**: Never commit `.env` files - use Vercel's environment variables

## ğŸ‰ After Deployment

Your app will be available at:
- **Production**: `https://your-app.vercel.app`
- **Preview**: Each push creates a preview deployment

The entire stack (frontend + backend API) is deployed together!

